FROM nginx:latest

# Instala OpenSSL para generar certificados
RUN apt-get update && apt-get install -y openssl && rm -rf /var/lib/apt/lists/*

# Copia configuración y script de entrada con permisos de ejecución
COPY --chmod=0755 default.conf /etc/nginx/conf.d/default.conf
COPY --chmod=0755 entrypoint.sh /entrypoint.sh

# Arranca el script que genera el certificado y luego Nginx
CMD ["/entrypoint.sh"]
